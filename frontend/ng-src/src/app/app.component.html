<mat-sidenav-container>
  <mat-sidenav mode="side" opened>
    <mat-list>
      <mat-list-item
        *ngFor="let book of books"
        (click)="select(book)"
        class="book"
        [class.selected]="selectedBook === book">
        {{book.title}}
      </mat-list-item>
    </mat-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <div *ngIf="selectedBookDetails && !errorText">
      <mat-card>
        <mat-card-title>{{selectedBookDetails.details.title}}</mat-card-title>
        <mat-card-subtitle>{{selectedBookDetails.details.author}}</mat-card-subtitle>
        <mat-card-content>{{selectedBookDetails.details.description}}</mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>Reviews</mat-card-title>
        <mat-card-content>
          <mat-card *ngFor="let review of selectedBookDetails.reviews" class="review">
            <mat-card-title>Rating: {{review.rating}}</mat-card-title>
            <mat-card-content>{{review.text}}</mat-card-content>
          </mat-card>
        </mat-card-content>
      </mat-card>
    </div>
    <div *ngIf="!selectedBookDetails && !errorText">
      Please select a book
    </div>
    <div *ngIf="errorText">
      Got error from server: {{errorText}}
      <button mat-icon-button (click)="select(selectedBook)" color="primary"><mat-icon>replay</mat-icon></button>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
